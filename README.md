# ptai-scripts
Скрипты автоматизации для PT Application Inspector

## Содержимое репозитория

1. [Пример работы с API](python-examples/auth.py) на Python
2. [Управление проектными ролями](regex-role-changer) с помощью регулярных выражений

## Получение токена

Существует несколько видов токенов. Для работы с API нужен JWT-токен, который
можно получить при помощи токена доступа (access token). Для этого необходимо отправить GET запрос
на ручку `/api/auth/signin` с заголовком с именем `Access-Token`, в котором будет содержаться токен доступа приложений.
Последний можно получить в UI настроек PT ApplicationInspector.


| Поле         | Описание                                                                              |
|--------------|---------------------------------------------------------------------------------------|
| accessToken  | Bearer-токен, который необходимо использовать в запросах к API                        |
| refreshToken | Токен, который используется для перевыпуска токена после истечения его срока действия |
| expiredAt    | Дата истечения срока действия токена                                                  |

## Список методов API

Доступные методы API можно посмотреть при помощи Swagger. Он доступен по URL `https://<URL сервера>/swagger/`. Там 
также можно аутентифицироваться при помощи JWT-токена, полученного в предыдущем пункте. Для этого нажмите на кнопку
'Authorize' и введите туда токен. **Не забудьте добавить `Bearer ` в начало!**

Аутентификация в Swagger позволяет из браузера исполнять методы API и анализировать результат.

## Другие полезные инструменты

Для работы с API PT Application Inspector также крайне полезен инструмент 
[ptai-ee-tools](https://github.com/POSIdev-community/ptai-ee-tools), в репозитории которого также содержится
библиотека для Java, позволяющая использовать API из программ. Помимо библиотеки, там есть утилита командной
строки, позволяющая запуска сканирования на сервере и получать отчет, а также готовые плагины для некоторых CI/CD 
систем.

## Вносите свой вклад

Вы можете помочь нашему сообществу внеся вклад. Им могут быть:

1. Скрипты для автоматизации взаимодействия с PT Application Inspector
2. Улучшение документации и примеры к ней

Для этого:
1. Сделайте форк этого репозитория;
2. Внесите в нём необходимые изменения;
3. Откройте Pull Request.


### Чеклист для добавления новых скриптов

- [ ] Создать файлы скрипта с кодом в уже существующей директории или создать новую (при необходимости)
- [ ] Обновить или создать README.md в директории. Необходимо указать всю важную информацию:
    - Назначение кода
    - Необходимые библиотеки
    - Способ установки и настройки
